-- Simple Key System with Discord Audit Logger
-- Minimal 50% transparent design

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

-- Configuration
local CORRECT_KEY = "Euvanoaware"
local WEBHOOK_URL = "https://discord.com/api/webhooks/1466565178609893479/DRpJ8J-Nn_U1R3Yl52gcjyq9H8f7NxcZeyUlGYN-8MUMAPf3X9yGdVMkvIl1U2q6zWQ4"

-- Function to get player stats
local function getPlayerStats()
    local stats = {
        Level = "N/A",
        Money = "N/A",
        Wins = "N/A"
    }
    
    if LocalPlayer:FindFirstChild("leaderstats") then
        local leaderstats = LocalPlayer.leaderstats
        
        if leaderstats:FindFirstChild("Level") then
            stats.Level = tostring(leaderstats.Level.Value)
        end
        
        if leaderstats:FindFirstChild("Money") then
            stats.Money = tostring(leaderstats.Money.Value)
        end
        
        if leaderstats:FindFirstChild("Wins") then
            stats.Wins = tostring(leaderstats.Wins.Value)
        end
    end
    
    return stats
end

-- Function to get player region
local function getPlayerRegion()
    local LocalizationService = game:GetService("LocalizationService")
    local success, result = pcall(function()
        return LocalizationService:GetCountryRegionForPlayerAsync(LocalPlayer)
    end)
    return success and result or "Unknown"
end

-- Function to send audit log to Discord
local function sendAuditLog()
    local stats = getPlayerStats()
    local region = getPlayerRegion()
    local jobId = game.JobId
    
    local accountAge = LocalPlayer.AccountAge
    
    local embedData = {
        ["embeds"] = {{
            ["title"] = "üîë Script Execution - Key Verified",
            ["description"] = "A user has successfully executed the script",
            ["color"] = 3066993,
            ["fields"] = {
                {
                    ["name"] = "üë§ User ID",
                    ["value"] = tostring(LocalPlayer.UserId),
                    ["inline"] = true
                },
                {
                    ["name"] = "üìõ Username",
                    ["value"] = LocalPlayer.Name,
                    ["inline"] = true
                },
                {
                    ["name"] = "üìÖ Account Age",
                    ["value"] = accountAge .. " days",
                    ["inline"] = true
                },
                {
                    ["name"] = "üìä Level",
                    ["value"] = stats.Level,
                    ["inline"] = true
                },
                {
                    ["name"] = "üí∞ Money",
                    ["value"] = stats.Money,
                    ["inline"] = true
                },
                {
                    ["name"] = "üèÜ Wins",
                    ["value"] = stats.Wins,
                    ["inline"] = true
                },
                {
                    ["name"] = "üåç Region",
                    ["value"] = region,
                    ["inline"] = true
                },
                {
                    ["name"] = "üéÆ Server Job ID",
                    ["value"] = jobId ~= "" and jobId or "Private Server",
                    ["inline"] = false
                }
            },
            ["footer"] = {
                ["text"] = "Euva Executor Audit System"
            },
            ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%S")
        }}
    }
    
    pcall(function()
        local jsonData = HttpService:JSONEncode(embedData)
        
        request({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = jsonData
        })
    end)
end

-- Function to load main GUI
local function loadMainGUI()
    sendAuditLog()
    
    local mainGuiUrl = "https://raw.githubusercontent.com/givenship/Unanchor.euva/refs/heads/main/Main"
    
    local success, result = pcall(function()
        return game:HttpGet(mainGuiUrl)
    end)
    
    if success then
        local loadFunc = loadstring(result)
        if loadFunc then
            loadFunc()
        end
    end
end

-- Create Simple Key System GUI
local keyGui = Instance.new("ScreenGui")
keyGui.Name = "KeySystemGui"
keyGui.ResetOnSpawn = false
keyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
keyGui.Parent = CoreGui

-- Simple box (50% transparent, no outline)
local keyFrame = Instance.new("Frame")
keyFrame.Name = "KeyFrame"
keyFrame.Size = UDim2.new(0, 350, 0, 180)
keyFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
keyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
keyFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
keyFrame.BackgroundTransparency = 0.5
keyFrame.BorderSizePixel = 0
keyFrame.Parent = keyGui

-- Title text
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 20)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Enter Key"
titleLabel.Font = Enum.Font.Gotham
titleLabel.TextSize = 20
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Parent = keyFrame

-- Key input box
local keyInput = Instance.new("TextBox")
keyInput.Size = UDim2.new(0, 300, 0, 40)
keyInput.Position = UDim2.new(0.5, 0, 0, 75)
keyInput.AnchorPoint = Vector2.new(0.5, 0)
keyInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
keyInput.BackgroundTransparency = 0.8
keyInput.BorderSizePixel = 0
keyInput.Text = ""
keyInput.PlaceholderText = "Key..."
keyInput.Font = Enum.Font.Gotham
keyInput.TextSize = 16
keyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
keyInput.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
keyInput.ClearTextOnFocus = false
keyInput.Parent = keyFrame

-- Status text
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 0, 30)
statusLabel.Position = UDim2.new(0, 0, 0, 130)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = ""
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.Parent = keyFrame

-- Check key function
local function checkKey()
    local enteredKey = keyInput.Text
    
    if enteredKey == "" then
        statusLabel.Text = "Please enter a key"
        statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
        return
    end
    
    if enteredKey == CORRECT_KEY then
        statusLabel.Text = "Key verified! Loading..."
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        keyInput.TextEditable = false
        
        wait(0.5)
        keyGui:Destroy()
        loadMainGUI()
    else
        statusLabel.Text = "Incorrect key"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        keyInput.Text = ""
    end
end

-- Enter key to submit
keyInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        checkKey()
    end
end)

print("Key System loaded")
